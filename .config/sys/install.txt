Download and write alpine linux extended to an external disk.

On Dell, use F12 to enter BIOS setup, then use Maintenance>Data Wipe
to wipe data.

Boot from Alpine.

Set up networking:

 # -r is needed for starting the network after configuration
 setup-interfaces -r

Set up time:

  setup-ntp chrony

Set up repos:

 setup-apkrepos -c
  # show mirror list, then select geographically nearest mirror
  # -c argument enables community repo

Set up doas and normal user:

  apk add doas
  echo permit :wheel >> /etc/doas.d/permit-wheel.conf
  adduser yc
  # change group
  adduser yc wheel

Install git:

  apk add git

Install encrypted system:

 setup-disk -v -e -m sys -s 0 /dev/sda
 # -v for verbose
 # -e for encrypted
 # -m for system disk
 # -s 0 for no swap (use swap file instead)

Power off, then reboot.

Add user home:

  doas -s
  git clone https://github.com/tie-ling/alpine-dots /home/yc
  chown -R yc:yc /home/yc

Install packages:

  apk add $(while read i; do printf "$i "; done < /home/yc/.config/sys/world)


Enable services:

  . /home/yc/.config/sys/rc-update_add.txt

Fix greetd user:

  adduser greetd seat

Fix sway:

  adduser yc seat

Restore system configs:

  mkdir -p /etc/elogind/logind.conf.d
  mkdir -p /etc/firefox/policies
  su yc -c "git  -C /home/yc/.config/sys/etc ls-files -z" | xargs -0I{} cp /home/yc/.config/sys/etc/{} /etc/{}

Reboot.
